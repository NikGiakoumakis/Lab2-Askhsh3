-------Άσκηση 3--------



%x SINGLELINECOMMENTS
%x MULTILINECOMMENTS
Στο παραπάνω κομμάτι ορίζουμε τους δικούς μας κανόνες ώστε το Flex να καταλάβει ότι ορίσαμε ειδικές καταστάσεις για ό,τι ξεκινάει με τα ονόματα SINGLELINECOMMENTS και MULTILINECOMMENTS.

%%
	
"//"					          { BEGIN(SINGLELINECOMMENTS); }
<SINGLELINECOMMENTS>\n  { BEGIN(INITIAL); fprintf(yyout, "\n"); }
<SINGLELINECOMMENTS>.	;
Εδώ διαχειριζόμαστε τα σχόλια που ξεκινάνε με // δηλαδή μπαίνουμε οπωσδήποτε στην κατάσταση μόλις συναντήσει // και μόλις συναντήσει \n (αλλαγή γραμμης) θα σταματήσει. Με την τελευταία εντολή το (.) σημαίνει ότι ό,τι χαρακτήρας, σύμβολο ή αριθμός υπάρχει μέσα στο // διαγράφεται.

"/*"					{ BEGIN(MULTILINECOMMENTS); }
<MULTILINECOMMENTS>"*/"	{ BEGIN(INITIAL); }
<MULTILINECOMMENTS>\n   { fprintf(yyout, "\n"); }
<MULTILINECOMMENTS>.    ; 
Εδώ πολύ παρόμοια λογική μόνο που μόλις συναντήσει /* μπαίνει στην κατάσταση και βγαίνει στο */. Μετά εισάγουμε και το newline ώστε αν υπάρχει ένα μεγάλο σχόλιο να μην χαθεί η ροή των γραμμών του αρχικού κώδικα και με το (.) διαγράφεται ό,τι υπάρχει μέσα.



.                       { fprintf(yyout, "%s", yytext); }
\n                      { fprintf(yyout, "%s", yytext); }

Και εδώ λέμε οτιδήποτε άλλο συναντήσεις απλά εκτύπωσέ το στο αρχειο εξοδου.

Στη main του προγράμματος χρησιμοποιούμε ένα for loop για να παίρνει πολλά αρχεία στη σειρά. Ανοίγουμε το yyout μία φορά στην αρχή. Για να δουλέψει το flex σε διαδοχικά αρχεία βάζουμε την yyrestart(yyin) μέσα στο loop ώστε να μηδενίζει και να διαβάζει το επόμενο αρχείο. Το αποτέλεσμα 
